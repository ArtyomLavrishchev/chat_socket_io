{"version":3,"sources":["components/Chat/footer/Footer.module.scss","socket.ts","api/images-api.ts","redux/users-reducer.ts","redux/message-reducer.ts","components/Chat/header/Header.tsx","components/Chat/footer/Footer.tsx","components/Chat/users-list/UsersList.tsx","components/Chat/messages/message/Message.tsx","components/Chat/messages/Messages.tsx","components/menu/BurgerMenu.tsx","components/Chat/Chat.tsx","common/useWindowSize.ts","components/Greet/Greet.tsx","common/name-generator.ts","App.tsx","redux/store.ts","index.tsx","components/Chat/header/Header.module.scss","components/Chat/users-list/UsersList.module.scss","components/menu/BurgerMenu.module.scss","components/Chat/Chat.module.scss","components/Greet/Greet.module.scss","components/Chat/messages/message/Message.module.scss","components/Chat/messages/Messages.module.scss"],"names":["module","exports","socket","io","imagesApi","axios","get","then","res","data","slice","createSlice","name","initialState","id","userName","photo","listOfUsers","reducers","setUser","state","action","payload","setPhoto","addUserToTheList","find","u","push","removeUser","index","findIndex","splice","usersReducer","reducer","actions","messages","addMessage","removeMessage","m","messageReducer","Header","login","dispatch","useDispatch","useEffect","className","style","wrapper","icon","user","text","image","backgroundImage","Footer","useState","message","setMessage","setImage","sendMessage","v1","newImage","emit","src","alt","onKeyPress","e","charCode","input","onChange","currentTarget","value","type","placeholder","file","element","files","reader","FileReader","onloadend","result","readAsDataURL","button","htmlFor","disabled","onClick","UsersList","users","useSelector","map","delButton","Message","deleteMessage","cloud","triangle","messageBox","messageBody","deleteBtn","React","memo","Messages","useCallback","messageId","messagesAnchorRef","useRef","autoScrollIsActive","setAutoScrollIsActive","current","scrollIntoView","behavior","onScroll","Math","abs","scrollHeight","scrollTop","clientHeight","ref","BurgerMenu","checked","setChecked","activeMenuClass","burgerMenuActive","burgerMenu","burgerMenuButton","burgerMenuLines","burgerMenuNav","Chat","width","undefined","setWidth","handleResize","window","innerWidth","addEventListener","removeEventListener","useWindowSize","on","msg","chatWrapper","dialogsWrapper","dialogs","Greet","joinHandler","styles","names","surnames","App","join","setJoin","indexHandler","arr","floor","random","length","firstLetterToUpperCase","arg","toUpperCase","surname","nameGenerator","a","img","console","error","rootReducer","combineReducers","store","configureStore","middleware","getDefaultMiddleware","prepend","thunkMiddleware","ReactDOM","render","document","getElementById"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,QAAU,wBAAwB,SAAW,yBAAyB,MAAQ,sBAAsB,KAAO,qBAAqB,OAAS,yB,oJCG5IC,E,MAFAC,GAAG,8C,0CCALC,EAAY,WAEjB,OAAOC,IAAMC,IAAN,mDAA6DC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SCOtFC,EAAQC,YAAY,CACtBC,KAAM,QACNC,aAT+B,CAC/BC,GAAI,GACJC,SAAU,GACVC,MAAO,GACPC,YAAa,IAMbC,SAAU,CACNC,QADM,SACEC,EAAOC,GACXD,EAAML,SAAWM,EAAOC,SAE5BC,SAJM,SAIGH,EAAOC,GACZD,EAAMJ,MAAQK,EAAOC,SAEzBE,iBAPM,SAOWJ,EAAOC,GACfD,EAAMH,YAAYQ,MAAK,SAAAC,GAAC,OAAIA,EAAEd,OAASS,EAAOC,QAAQV,SACvDQ,EAAMH,YAAYU,KAAlB,eAA2BN,EAAOC,WAG1CM,WAZM,SAYKR,EAAOC,GACd,IAAMQ,EAAQT,EAAMH,YAAYa,WAAU,SAAAJ,GAAC,OAAIA,EAAEd,OAASS,EAAOC,WAC7DO,GAAS,GACTT,EAAMH,YAAYc,OAAOF,EAAO,OAMnCG,EAAetB,EAAMuB,Q,EAC+BvB,EAAMwB,QAAzDf,E,EAAAA,QAASI,E,EAAAA,SAAUC,E,EAAAA,iBAAkBI,E,EAAAA,WC3B7ClB,EAAQC,YAAY,CACtBC,KAAM,WACNC,aANmC,CACnCsB,SAAU,IAMVjB,SAAU,CACNkB,WADM,SACKhB,EAAOC,GACdD,EAAMe,SAASR,KAAf,eAAwBN,EAAOC,WAEnCe,cAJM,SAIQjB,EAAOC,GACjB,IAAMQ,EAAQT,EAAMe,SAASL,WAAU,SAAAQ,GAAC,OAAIA,EAAExB,KAAOO,EAAOC,WACxDO,GAAS,GACTT,EAAMe,SAASJ,OAAOF,EAAO,OAMhCU,EAAiB7B,EAAMuB,Q,EACOvB,EAAMwB,QAAnCE,E,EAAAA,WAAYC,E,EAAAA,c,wBCHXG,EAlBqB,SAAC,GAAoB,IAAnBxB,EAAkB,EAAlBA,MAAOyB,EAAW,EAAXA,MACnCC,EAAWC,cAIjB,OAHAC,qBAAU,WACNF,EAASlB,EAAiB,CAACZ,KAAM6B,EAAOzB,MAAOA,OAChD,IAEC,yBAAQ6B,UAAWC,IAAMC,QAAzB,UACI,8BACI,sBAAMF,UAAWC,IAAME,KAAvB,sBAEJ,sBAAKH,UAAWC,IAAMG,KAAtB,UACI,sBAAMJ,UAAWC,IAAMI,KAAvB,SAA8BT,IAC9B,qBAAKI,UAAWC,IAAMK,MAAOL,MAAO,CAACM,gBAAgB,QAAD,OAAUpC,EAAV,gB,0BCwCrDqC,EApDqB,SAAC,GAAuB,IAAtBtC,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,MAAW,EACzBsC,mBAAiB,IADQ,mBAChDC,EADgD,KACvCC,EADuC,OAE7BF,mBAAsC,IAFT,mBAEhDH,EAFgD,KAEzCM,EAFyC,KAOjDC,EAAc,WAChB,IAAMjD,EAAO,CACTK,GAAI6C,cACJ/C,KAAMG,EACNwC,QAASA,EACTvC,MAAOA,EACP4C,SAAUT,GAEdjD,EAAO2D,KAAK,eAAgBpD,GAC5B+C,EAAW,IACXC,EAAS,KAsBb,OACI,sBAAKZ,UAAWC,IAAMC,QAAtB,UACKI,GAAS,qBAAKN,UAAWC,IAAMc,SAAUE,IAAG,UAAKX,GAASY,IAAK,aAChE,uBAAOC,WATM,SAACC,GACC,KAAfA,EAAEC,UACFR,KAOiCb,UAAWC,IAAMqB,MAAOC,SAvC1C,SAACH,GACpBT,EAAWS,EAAEI,cAAcC,QAsC4DC,KAAM,OAClFC,YAAa,UACbF,MAAOf,IACd,uBAAOgB,KAAK,OAAO3D,KAAK,OAAOE,GAAG,cAAc+B,UAAWC,IAAM2B,KAAML,SAxB/E,SAA8BM,GAC1B,IAAID,EACAC,EAAQL,cAAcM,QACtBF,EAAOC,EAAQL,cAAcM,MAAM,IAEvC,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WACfrB,EAASmB,EAAOG,SAEpBN,GAAQG,EAAOI,cAAcP,MAgBzB,uBAAO5B,UAAWC,IAAMmC,OAAQC,QAAQ,cAAxC,oBACA,wBAAQC,SAAsB,KAAZ5B,GAA4B,KAAVJ,EAAcN,UAAWC,IAAMmC,OAC3DG,QAAS1B,EADjB,wB,iBC7BG2B,EAjBa,WACxB,IAAM3C,EAAWC,cACX2C,EAAQC,aAA2C,SAAAnE,GAAK,OAAIA,EAAMkE,MAAMrE,eAI9E,OACI,qBAAK4B,UAAWC,IAAMC,QAAtB,SACKuC,EAAME,KAAI,SAAA9D,GAAC,OAAI,sBAAKmB,UAAWC,IAAMG,KAAtB,UACZ,qBAAKJ,UAAWC,IAAMK,MAAOL,MAAO,CAACM,gBAAgB,QAAD,OAAU1B,EAAEV,MAAZ,SACpD,qBAAK6B,UAAWC,IAAMI,KAAtB,SAA6BxB,EAAEd,OAC/B,wBAAQiC,UAAWC,IAAM2C,UAAWL,QAAS,kBAR9BrE,EAQsDW,EAAEd,UAP/E8B,EAASd,EAAWb,IADE,IAACA,GAQf,sBAH6CW,EAAEd,Y,iCCDzD8E,EAAiC,SAAC,GACqB,IAAxD1E,EAAuD,EAAvDA,MAAOJ,EAAgD,EAAhDA,KAAM2C,EAA0C,EAA1CA,QAASzC,EAAiC,EAAjCA,GAAI6E,EAA6B,EAA7BA,cAAe/B,EAAc,EAAdA,SAC1C,OACI,sBAAKf,UAAWC,IAAMS,QAAtB,UACI,qBAAKV,UAAWC,IAAM9B,MAAO8B,MAAO,CAACM,gBAAgB,QAAD,OAAUpC,EAAV,SACpD,sBAAK6B,UAAWC,IAAM8C,MAAtB,UACI,qBAAK/C,UAAWC,IAAM+C,WACtB,sBAAKhD,UAAWC,IAAMgD,WAAtB,UACI,qBAAKjD,UAAWC,IAAMlC,KAAtB,SAA6BA,IAC7B,sBAAKiC,UAAWC,IAAMiD,YAAtB,UACKnC,GAAY,qBAAKf,UAAWC,IAAMc,SAAUE,IAAG,UAAKF,GAAYG,IAAK,aACrER,WAIb,wBAAQV,UAAWC,IAAMkD,UAAWZ,QAAS,kBAAMO,EAAc7E,IAAjE,wBAKGmF,MAAMC,KAAKR,GCeXS,EAzCY,WACvB,IAAMhE,EAAWoD,aAA6C,SAAAnE,GAAK,OAAIA,EAAMe,SAASA,YAChFO,EAAWC,cACXgD,EAAgBS,uBAAY,SAACC,GAC/B3D,EAASL,EAAcgE,MACxB,CAAC3D,IAEE4D,EAAoBC,iBAAuB,MAPpB,EAQuBjD,oBAAkB,GARzC,mBAQtBkD,EARsB,KAQFC,EARE,KAU7B7D,qBAAU,WACmB,IAAD,EAApB4D,IACA,UAAAF,EAAkBI,eAAlB,SAA2BC,eAAe,CAACC,SAAU,cAE1D,CAACzE,IAWJ,OACI,sBAAKU,UAAWC,IAAMC,QAAS8D,SAVb,SAAC5C,GACnB,IAAMS,EAAUT,EAAEI,cACdyC,KAAKC,IAAKrC,EAAQsC,aAAetC,EAAQuC,UAAavC,EAAQwC,cAAgB,KAC7EV,GAAsBC,GAAsB,GAE7CD,GAAsBC,GAAsB,IAKhD,UACKtE,EAASqD,KAAI,SAAClD,GAAD,OAAO,8BACjB,cAAC,EAAD,CACIsB,SAAUtB,EAAEsB,SACZ5C,MAAOsB,EAAEtB,MACTJ,KAAM0B,EAAE1B,KACR2C,QAASjB,EAAEiB,QACXzC,GAAIwB,EAAExB,GACN6E,cAAeA,KAPQrD,EAAExB,OASjC,qBAAKqG,IAAKb,Q,qBCvCTc,EAAanB,IAAMC,MAAK,WAAO,IAAD,EACT5C,oBAAS,GADA,mBAChC+D,EADgC,KACvBC,EADuB,KAGjCC,EAAe,UAAMF,EAAUvE,IAAM0E,iBAAmB,GAAzC,YAA+C1E,IAAM2E,YAE1E,OACI,sBAAK5E,UAAW0E,EAAhB,UACI,qBAAKnC,QAAS,kBAAMkC,GAAYD,IAAUxE,UAAWC,IAAM4E,iBAA3D,SACI,sBAAM7E,UAAWC,IAAM6E,oBAE3B,qBAAK9E,UAAWC,IAAM8E,cAAtB,SACI,cAAC,EAAD,YCsBDC,GAxBF,WACT,IAAMnF,EAAWC,cACX5B,EAAWwE,aAAiC,SAAAnE,GAAK,OAAIA,EAAMkE,MAAMvE,YACjEC,EAAQuE,aAAiC,SAAAnE,GAAK,OAAIA,EAAMkE,MAAMtE,SAC9D8G,ECdH,WAA0B,IAAD,EACFxE,wBAA6ByE,GAD3B,mBACrBD,EADqB,KACdE,EADc,KAY5B,OATApF,qBAAU,WACN,SAASqF,IACLD,EAASE,OAAOC,YAIpB,OAFAD,OAAOE,iBAAiB,SAAUH,GAClCA,IACO,kBAAMC,OAAOG,oBAAoB,SAAUJ,MACnD,IAEIH,EDEOQ,GAMd,OAJA1F,qBAAU,WACNF,GPSG,SAACA,GACJxC,EAAOqI,GAAG,gBAAgB,SAACC,GACnB9F,EAASN,EAAWoG,IACpB9F,EAASlB,EAAiB,CAACZ,KAAM4H,EAAI5H,KAAMI,MAAOwH,EAAIxH,iBOX/D,CAAC0B,IAGA,sBAAKG,UAAWC,IAAM2F,YAAtB,UACI,cAAC,EAAD,CAAQzH,MAAOA,EAAOyB,MAAO1B,IAC7B,sBAAK8B,UAAWC,IAAM4F,eAAtB,UACKZ,GAASA,GAAS,IAAM,cAACV,EAAD,IAAgB,cAAC,EAAD,IACzC,sBAAKvE,UAAWC,IAAM6F,QAAtB,UACI,cAAC,EAAD,IACA,cAAC,EAAD,CAAQ3H,MAAOA,EAAOD,SAAUA,c,oBEdrC6H,GAToB,SAAC,GAAmB,IAAlBC,EAAiB,EAAjBA,YACjC,OACI,sBAAKhG,UAAWiG,KAAO/F,QAAvB,UACI,qBAAKF,UAAWiG,KAAO5F,KAAvB,oIACA,wBAAQL,UAAWiG,KAAO7D,OAAQG,QAASyD,EAA3C,kGCXNE,GAAQ,CAAC,6CAAW,mGAAoB,uCAAU,6CAAW,iCAAS,iCAAS,qEAAe,+DAChG,qEAAe,6CAAW,6CAAW,mDAAY,mDAAY,uCAAU,uFAAkB,uCAAU,6CACnG,uCAAU,mDAAY,2EAAgB,mDAAY,iCAAS,uCAAU,iCAAS,qEAAe,mDAAY,6CACzG,yDAAa,qEAAe,uFAAkB,yDAAa,mDAAY,mDAAY,qEAAe,qEAClG,6CAAW,iFAAiB,iCAAS,uCAAU,uCAAU,iCAAS,uCAAU,uCAAU,iCAAS,iCAAS,yDACxG,yDAAa,uCAAU,+DAAc,6CAAW,uCAAU,+DAAc,uCAAU,2EAClF,iCAAS,6CAAW,uCAAU,yDAAa,6CAAW,6CAAW,uCAAU,yDAAa,uCAAU,6CAClG,qEAAe,2EAAgB,uCAAU,6CAAW,mDAAY,yDAAa,2EAAgB,+DAC7F,yDAAa,6FAAmB,6CAAW,2EAAgB,6CAAW,+DAAc,+DAAc,2EAClG,yDAAa,mDAAY,mDAAY,uFAAkB,6CAAW,mDAAY,2EAAgB,mDAC9F,mDAAY,uCAAU,2EAAgB,6CAAW,yDAAa,2EAAgB,6CAAW,2EACzF,uFAAkB,mDAAY,sEAC5BC,GAAW,CAAC,qBAAO,6CAAW,2BAAQ,uCAAU,2BAAQ,2BAAQ,qBAAO,uCAAU,6CAAW,qBAAO,iCACrG,iCAAS,iCAAS,qBAAO,iCAAS,2BAAQ,yDAAa,qBAAO,iCAAS,iCAAS,6CAAW,qBAAO,6CAClG,2BAAQ,yDAAa,2BAAQ,2BAAQ,uCAAU,uCAAU,iCAAS,6CAAW,qBAAO,iCAAS,iCAAS,iCACtG,iCAAS,iCAAS,2BAAQ,iCAAS,qBAAO,6CAAW,qBAAO,iCAAS,iCAAS,iCAAS,mDAAY,6CACnG,qBAAO,2BAAQ,2BAAQ,uCAAU,mDAAY,iCAAS,mDAAY,2BAAQ,mDAAY,qBAAO,mDAAY,2BACzG,6CAAW,6CAAW,uCAAU,yDAAa,uCAAU,uCAAU,uCAAU,qBAAO,iCAAS,qBAAO,iCAAS,2BAC3G,iFAAiB,qBAAO,2BAAQ,uCAAU,iCAAS,2BAAQ,yDAAa,iCAAS,qBAAO,mDAAY,iCACpG,iCAAS,uCAAU,6CAAW,iCAAS,6CAAW,uCAAU,iCAAS,2BAAQ,2BAAQ,iCAAS,uCAAU,2BACxG,+DAAc,2EAAgB,qBAAO,uCAAU,uCAAU,wCCO9CC,GAnBH,WAAO,IAAD,EACU3F,oBAAkB,GAD5B,mBACP4F,EADO,KACDC,EADC,KAERzG,EAAWC,cAEjBC,qBAAU,WACNF,EAASvB,EDSY,WACzB,IAAMiI,EAAe,SAACC,GAAD,OAAmBvC,KAAKwC,MAAMxC,KAAKyC,SAAWF,EAAIG,SACjEC,EAAyB,SAACC,GAAD,OAAiBA,EAAI,GAAGC,cAAgBD,EAAIhJ,MAAM,IAC3EE,EAAOmI,GAAMK,EAAaL,KAC1Ba,EAAUZ,GAASI,EAAaJ,KACtC,MAAM,GAAN,OAAUS,EAAuB7I,GAAjC,YAA0C6I,EAAuBG,ICd5CC,KACjBnH,EZwBgB,uCAAM,WAAOA,GAAP,eAAAoH,EAAA,+EAEH1J,IAFG,OAEhBK,EAFgB,OAGtBiC,EAASnB,EAASd,EAAK,GAAGsJ,MAHJ,gDAKtBC,QAAQC,MAAR,MALsB,yDAAN,yDYvBjB,CAACvH,IAMJ,OACI,qBAAKG,UAAU,MAAf,SACMqG,EAA2C,cAAC,GAAD,IAArC,cAAC,GAAD,CAAOL,YANH,WAChBM,GAAQ,S,iBCZVe,GAAcC,aAAgB,CAChC7E,MAAOtD,EACPG,SAAUI,IAGD6H,GAAQC,YAAe,CAChCpI,QAASiI,GACTI,WAAY,SAAAC,GAAoB,OAAIA,IAAuBC,QAAQC,SCNvEC,IAASC,OACL,cAAC,IAAD,CAAUP,MAAOA,GAAjB,SACI,cAAC,GAAD,MAEJQ,SAASC,eAAe,U,mBCV5B7K,EAAOC,QAAU,CAAC,QAAU,wBAAwB,KAAO,qBAAqB,KAAO,qBAAqB,KAAO,qBAAqB,MAAQ,wB,mBCAhJD,EAAOC,QAAU,CAAC,QAAU,2BAA2B,MAAQ,yBAAyB,MAAQ,yBAAyB,SAAW,4BAA4B,WAAa,8BAA8B,YAAc,+BAA+B,SAAW,4BAA4B,KAAO,wBAAwB,UAAY,6BAA6B,QAAU,2BAA2B,KAAO,wBAAwB,MAAQ,yBAAyB,KAAO,wBAAwB,UAAY,+B,mBCAvfD,EAAOC,QAAU,CAAC,WAAa,+BAA+B,iBAAmB,qCAAqC,gBAAkB,oCAAoC,cAAgB,kCAAkC,iBAAmB,uC,mBCAjPD,EAAOC,QAAU,CAAC,YAAc,0BAA0B,eAAiB,6BAA6B,QAAU,wB,mBCAlHD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,KAAO,oBAAoB,OAAS,wB,kBCAvFD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,MAAQ,uBAAuB,MAAQ,uBAAuB,SAAW,0BAA0B,WAAa,4BAA4B,YAAc,6BAA6B,SAAW,0BAA0B,KAAO,sBAAsB,UAAY,6B,mBCA1TD,EAAOC,QAAU,CAAC,QAAU,4B","file":"static/js/main.d4856988.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Footer_wrapper__3fWn5\",\"newImage\":\"Footer_newImage__3VjFU\",\"input\":\"Footer_input__2lSXn\",\"file\":\"Footer_file__30Vqx\",\"button\":\"Footer_button__3FQRe\"};","import io from 'socket.io-client';\r\n\r\nconst socket = io(\"https://socketiochat-server.herokuapp.com/\");\r\n\r\nexport default socket;","import axios from 'axios';\r\n\r\nexport const imagesApi = {\r\n    getImage() {\r\n        return axios.get(`https://breakingbadapi.com/api/character/random`).then(res => res.data)\r\n    }\r\n}","import {createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {Dispatch} from \"redux\";\r\nimport {imagesApi} from \"../api/images-api\";\r\n\r\nconst initialState: InitialState = {\r\n    id: '',\r\n    userName: '',\r\n    photo: '',\r\n    listOfUsers: []\r\n};\r\n\r\nconst slice = createSlice({\r\n    name: 'users',\r\n    initialState: initialState,\r\n    reducers: {\r\n        setUser(state, action: PayloadAction<string>) {\r\n            state.userName = action.payload;\r\n        },\r\n        setPhoto(state, action: PayloadAction<string>) {\r\n            state.photo = action.payload;\r\n        },\r\n        addUserToTheList(state, action: PayloadAction<UsersType>) {\r\n            if (!state.listOfUsers.find(u => u.name === action.payload.name)) {\r\n                state.listOfUsers.push({...action.payload});\r\n            }\r\n        },\r\n        removeUser(state, action: PayloadAction<string>) {\r\n            const index = state.listOfUsers.findIndex(u => u.name === action.payload);\r\n            if (index > -1) {\r\n                state.listOfUsers.splice(index, 1)\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nexport const usersReducer = slice.reducer;\r\nexport const {setUser, setPhoto, addUserToTheList, removeUser} = slice.actions;\r\n\r\nexport const getPhoto = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const data = await imagesApi.getImage()\r\n        dispatch(setPhoto(data[0].img))\r\n    } catch (err) {\r\n        console.error(err)\r\n    }\r\n}\r\n\r\ntype InitialState = {\r\n    id: string\r\n    userName: string\r\n    photo: string\r\n    listOfUsers: Array<UsersType>\r\n}\r\n\r\nexport type UsersType = {\r\n    name: string\r\n    photo: string\r\n}","import {createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {Dispatch} from \"redux\";\r\nimport socket from \"../socket\";\r\nimport {addUserToTheList} from \"./users-reducer\";\r\n\r\nconst initialState: InitialStateType = {\r\n    messages: [],\r\n};\r\n\r\nconst slice = createSlice({\r\n    name: 'messages',\r\n    initialState: initialState,\r\n    reducers: {\r\n        addMessage(state, action: PayloadAction<MessageType>) {\r\n            state.messages.push({...action.payload})\r\n        },\r\n        removeMessage(state, action: PayloadAction<string>) {\r\n            const index = state.messages.findIndex(m => m.id === action.payload);\r\n            if (index > -1) {\r\n                state.messages.splice(index, 1)\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nexport const messageReducer = slice.reducer;\r\nexport const {addMessage, removeMessage} = slice.actions;\r\n\r\nexport const addMessageThunk = () => {\r\n    return (dispatch: Dispatch) => {\r\n        socket.on('chat message', (msg: MessageType) => {\r\n                dispatch(addMessage(msg));\r\n                dispatch(addUserToTheList({name: msg.name, photo: msg.photo}))\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\n\r\ntype InitialStateType = {\r\n    messages: Array<MessageType>\r\n}\r\n\r\nexport type MessageType = {\r\n    id: string\r\n    message: string\r\n    name: string\r\n    photo: string\r\n    newImage: string\r\n}","import React, {useEffect} from 'react';\r\nimport {addUserToTheList} from '../../../redux/users-reducer';\r\nimport style from './Header.module.scss'\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nconst Header: React.FC<PropsType> = ({photo, login}) => {\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        dispatch(addUserToTheList({name: login, photo: photo}))\r\n    }, [])\r\n    return (\r\n        <header className={style.wrapper}>\r\n            <div>\r\n                <span className={style.icon}>&#x2709;</span>\r\n            </div>\r\n            <div className={style.user}>\r\n                <span className={style.text}>{login}</span>\r\n                <div className={style.image} style={{backgroundImage: `url(\"${photo}\")`}}/>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n\r\ntype PropsType = {\r\n    photo: string\r\n    login: string\r\n}","import React, {ChangeEvent, useState} from 'react';\r\nimport style from './Footer.module.scss';\r\nimport {v1} from \"uuid\";\r\nimport socket from \"../../../socket\";\r\n\r\nconst Footer: React.FC<PropsType> = ({userName, photo}) => {\r\n    const [message, setMessage] = useState<string>('');\r\n    const [image, setImage] = useState<string | ArrayBuffer | null>('');\r\n    const messageHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setMessage(e.currentTarget.value);\r\n\r\n    };\r\n    const sendMessage = () => {\r\n        const data = {\r\n            id: v1(),\r\n            name: userName,\r\n            message: message,\r\n            photo: photo,\r\n            newImage: image\r\n        };\r\n        socket.emit('chat message', data);\r\n        setMessage('');\r\n        setImage('')\r\n\r\n    };\r\n\r\n    function encodeImageFileAsURL(element: ChangeEvent<HTMLInputElement>) {\r\n        let file;\r\n        if (element.currentTarget.files) {\r\n            file = element.currentTarget.files[0];\r\n        }\r\n        let reader = new FileReader();\r\n        reader.onloadend = function () {\r\n            setImage(reader.result)\r\n        }\r\n        file && reader.readAsDataURL(file);\r\n    }\r\n\r\n    const onPressEnter = (e: React.KeyboardEvent) => {\r\n        if (e.charCode === 13) {\r\n            sendMessage()\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={style.wrapper}>\r\n            {image && <img className={style.newImage} src={`${image}`} alt={'newImage'}/>}\r\n            <input onKeyPress={onPressEnter} className={style.input} onChange={messageHandler} type={'text'}\r\n                   placeholder={\"Message\"}\r\n                   value={message}/>\r\n            <input type=\"file\" name=\"file\" id=\"input__file\" className={style.file} onChange={encodeImageFileAsURL}/>\r\n            <label className={style.button} htmlFor=\"input__file\">&#10011;</label>\r\n            <button disabled={message === '' && image === ''} className={style.button}\r\n                    onClick={sendMessage}>&#10147;</button>\r\n        </div>\r\n    );\r\n};\r\nexport default Footer;\r\n\r\ntype PropsType = {\r\n    userName: string\r\n    photo: string\r\n}","import React from 'react';\r\nimport {removeUser, UsersType} from \"../../../redux/users-reducer\";\r\nimport style from './UsersList.module.scss';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootType} from \"../../../redux/store\";\r\n\r\nconst UsersList: React.FC = () => {\r\n    const dispatch = useDispatch();\r\n    const users = useSelector<AppRootType, Array<UsersType>>(state => state.users.listOfUsers)\r\n    const removeUserHandler = (userName: string) => {\r\n        dispatch(removeUser(userName));\r\n    }\r\n    return (\r\n        <div className={style.wrapper}>\r\n            {users.map(u => <div className={style.user} key={u.name}>\r\n                <div className={style.image} style={{backgroundImage: `url(\"${u.photo}\")`}}/>\r\n                <div className={style.text}>{u.name}</div>\r\n                <button className={style.delButton} onClick={() => removeUserHandler(u.name)}>&#10008;</button>\r\n            </div>)}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UsersList;","import React from \"react\";\nimport style from \"./Message.module.scss\"\n\n\ntype MessageType = {\n    photo: string\n    name: string\n    message: string\n    id: string\n    newImage: string\n    deleteMessage: (id: string) => void\n}\n\nconst Message: React.FC<MessageType> = (\n    {photo, name, message, id, deleteMessage, newImage}) => {\n    return (\n        <div className={style.message}>\n            <div className={style.photo} style={{backgroundImage: `url(\"${photo}\")`}}/>\n            <div className={style.cloud}>\n                <div className={style.triangle}/>\n                <div className={style.messageBox}>\n                    <div className={style.name}>{name}</div>\n                    <div className={style.messageBody}>\n                        {newImage && <img className={style.newImage} src={`${newImage}`} alt={'newImage'}/>}\n                        {message}\n                    </div>\n                </div>\n            </div>\n            <button className={style.deleteBtn} onClick={() => deleteMessage(id)}>&#10008;</button>\n        </div>\n    );\n};\n\nexport default React.memo(Message);\n","import React, {useCallback, useEffect, useRef, useState} from 'react';\r\nimport style from \"./Messages.module.scss\";\r\nimport {MessageType, removeMessage} from \"../../../redux/message-reducer\";\r\nimport Message from \"./message/Message\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootType} from \"../../../redux/store\";\r\n\r\nconst Messages: React.FC = () => {\r\n    const messages = useSelector<AppRootType, Array<MessageType>>(state => state.messages.messages)\r\n    const dispatch = useDispatch();\r\n    const deleteMessage = useCallback((messageId: string) => {\r\n        dispatch(removeMessage(messageId));\r\n    }, [dispatch]);\r\n\r\n    const messagesAnchorRef = useRef<HTMLDivElement>(null)\r\n    const [autoScrollIsActive, setAutoScrollIsActive] = useState<boolean>(true)\r\n\r\n    useEffect(() => {\r\n        if (autoScrollIsActive) {\r\n            messagesAnchorRef.current?.scrollIntoView({behavior: \"smooth\"})\r\n        }\r\n    }, [messages])\r\n\r\n    const scrollHandler = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        const element = e.currentTarget;\r\n        if (Math.abs((element.scrollHeight - element.scrollTop) - element.clientHeight) < 300) {\r\n            !autoScrollIsActive && setAutoScrollIsActive(true)\r\n        } else {\r\n            autoScrollIsActive && setAutoScrollIsActive(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={style.wrapper} onScroll={scrollHandler}>\r\n            {messages.map((m) => <div key={m.id}>\r\n                <Message\r\n                    newImage={m.newImage}\r\n                    photo={m.photo}\r\n                    name={m.name}\r\n                    message={m.message}\r\n                    id={m.id}\r\n                    deleteMessage={deleteMessage}/>\r\n            </div>)}\r\n            <div ref={messagesAnchorRef}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Messages;\r\n","import React, {useState} from \"react\";\r\nimport style from \"./BurgerMenu.module.scss\"\r\nimport UsersList from \"../Chat/users-list/UsersList\";\r\n\r\nexport const BurgerMenu = React.memo(() => {\r\n    const [checked, setChecked] = useState(false);\r\n\r\n    const activeMenuClass = `${checked ? style.burgerMenuActive : ''} ${style.burgerMenu}`\r\n\r\n    return (\r\n        <div className={activeMenuClass}>\r\n            <div onClick={() => setChecked(!checked)} className={style.burgerMenuButton}>\r\n                <span className={style.burgerMenuLines}/>\r\n            </div>\r\n            <div className={style.burgerMenuNav}>\r\n                <UsersList/>\r\n            </div>\r\n        </div>\r\n    )\r\n});\r\n","import React, {useEffect} from 'react';\r\nimport style from './Chat.module.scss'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootType} from \"../../redux/store\";\r\nimport {addMessageThunk} from \"../../redux/message-reducer\";\r\nimport Header from \"./header/Header\";\r\nimport Footer from \"./footer/Footer\";\r\nimport UsersList from \"./users-list/UsersList\";\r\nimport Messages from \"./messages/Messages\";\r\nimport {useWindowSize} from \"../../common/useWindowSize\";\r\nimport {BurgerMenu} from '../menu/BurgerMenu';\r\n\r\n\r\nconst Chat = () => {\r\n    const dispatch = useDispatch();\r\n    const userName = useSelector<AppRootType, string>(state => state.users.userName)\r\n    const photo = useSelector<AppRootType, string>(state => state.users.photo)\r\n    const width = useWindowSize();\r\n\r\n    useEffect(() => {\r\n        dispatch(addMessageThunk());\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <div className={style.chatWrapper}>\r\n            <Header photo={photo} login={userName}/>\r\n            <div className={style.dialogsWrapper}>\r\n                {width && width <= 768 ? <BurgerMenu/> : <UsersList/>}\r\n                <div className={style.dialogs}>\r\n                    <Messages/>\r\n                    <Footer photo={photo} userName={userName}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;","import {useEffect, useState} from \"react\";\r\n\r\n\r\nexport function useWindowSize() {\r\n    const [width, setWidth] = useState<number | undefined>(undefined);\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWidth(window.innerWidth);\r\n        }\r\n        window.addEventListener(\"resize\", handleResize);\r\n        handleResize();\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    return width;\r\n}","import React from 'react';\r\nimport styles from './Greet.module.scss'\r\n\r\ntype GreetType = {\r\n    joinHandler: () => void\r\n}\r\n\r\nconst Greet: React.FC<GreetType> = ({joinHandler}) => {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className={styles.text}>Добро пожаловать в чат!</div>\r\n            <button className={styles.button} onClick={joinHandler}>Войти в комнату</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Greet;","const names = [\"прежний\", \"административный\", \"теплый\", \"женский\", \"яркий\", \"серый\", \"официальный\", \"английский\",\r\n    \"французский\", \"опасный\", \"богатый\", \"правовой\", \"железный\", \"верный\", \"дополнительный\", \"лесной\", \"горячий\",\r\n    \"редкий\", \"массовый\", \"региональный\", \"активный\", \"умный\", \"летний\", \"божий\", \"юридический\", \"здоровый\", \"веселый\",\r\n    \"налоговый\", \"эффективный\", \"художественный\", \"уголовный\", \"взрослый\", \"северный\", \"генеральный\", \"сегодняшний\",\r\n    \"древний\", \"замечательный\", \"милый\", \"острый\", \"лишний\", \"узкий\", \"задний\", \"бедный\", \"ясный\", \"синий\", \"указанный\",\r\n    \"согласный\", \"желтый\", \"творческий\", \"трудный\", \"нижний\", \"культурный\", \"мягкий\", \"литературный\",\r\n    \"сухой\", \"верхний\", \"мощный\", \"обязанный\", \"жесткий\", \"морской\", \"вечный\", \"спокойный\", \"ночной\", \"учебный\",\r\n    \"медицинский\", \"промышленный\", \"свежий\", \"крепкий\", \"полезный\", \"природный\", \"традиционный\", \"правильный\",\r\n    \"партийный\", \"психологический\", \"голубой\", \"православный\", \"дальний\", \"совместный\", \"деревянный\", \"материальный\",\r\n    \"виноватый\", \"понятный\", \"приятный\", \"исполнительный\", \"круглый\", \"семейный\", \"транспортный\", \"домашний\",\r\n    \"торговый\", \"резкий\", \"удивительный\", \"мужской\", \"некоторый\", \"практический\", \"строгий\", \"существенный\",\r\n    \"индивидуальный\", \"сельский\", \"невозможный\"]\r\nconst surnames = [\"год\", \"человек\", \"день\", \"вопрос\", \"глаз\", \"друг\", \"дом\", \"случай\", \"ребенок\", \"вид\", \"конец\",\r\n    \"город\", \"закон\", \"час\", \"образ\", \"отец\", \"результат\", \"бог\", \"народ\", \"голос\", \"процесс\", \"суд\", \"уровень\",\r\n    \"стол\", \"президент\", \"путь\", \"язык\", \"взгляд\", \"момент\", \"месяц\", \"порядок\", \"муж\", \"вечер\", \"орган\", \"рынок\",\r\n    \"смысл\", \"театр\", \"труд\", \"центр\", \"сын\", \"интерес\", \"век\", \"автор\", \"ответ\", \"совет\", \"разговор\", \"мужчина\",\r\n    \"ряд\", \"счет\", \"план\", \"проект\", \"материал\", \"рубль\", \"документ\", \"срок\", \"институт\", \"ход\", \"директор\", \"опыт\",\r\n    \"принцип\", \"товарищ\", \"объект\", \"гражданин\", \"период\", \"состав\", \"пример\", \"лес\", \"палец\", \"тип\", \"метод\", \"брат\",\r\n    \"представитель\", \"шаг\", \"край\", \"размер\", \"район\", \"банк\", \"начальник\", \"класс\", \"зал\", \"характер\", \"герой\",\r\n    \"гость\", \"воздух\", \"мальчик\", \"фильм\", \"договор\", \"регион\", \"выбор\", \"врач\", \"факт\", \"завод\", \"бизнес\", \"союз\",\r\n    \"специалист\", \"руководитель\", \"дух\", \"способ\", \"хозяин\", \"доллар\"]\r\n\r\nexport const nameGenerator = () => {\r\n    const indexHandler = (arr: string[]) => Math.floor(Math.random() * arr.length);\r\n    const firstLetterToUpperCase = (arg: string) => arg[0].toUpperCase() + arg.slice(1);\r\n    const name = names[indexHandler(names)];\r\n    const surname = surnames[indexHandler(surnames)];\r\n    return `${firstLetterToUpperCase(name)} ${firstLetterToUpperCase(surname)}`;\r\n}","import React, {useEffect, useState} from 'react';\nimport './App.scss';\nimport Chat from \"./components/Chat/Chat\";\nimport Greet from \"./components/Greet/Greet\";\nimport {getPhoto, setUser} from \"./redux/users-reducer\";\nimport {nameGenerator} from \"./common/name-generator\";\nimport {useDispatch} from \"react-redux\";\n\nconst App = () => {\n    const [join, setJoin] = useState<boolean>(false);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(setUser(nameGenerator()));\n        dispatch(getPhoto())\n    }, [dispatch]);\n\n    const joinHandler = () => {\n        setJoin(true)\n    };\n\n    return (\n        <div className=\"App\">\n            {!join? <Greet joinHandler={joinHandler}/> : <Chat/>}\n        </div>\n    );\n};\nexport default App;","import {combineReducers} from \"redux\";\r\nimport {configureStore} from \"@reduxjs/toolkit\";\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport {usersReducer} from \"./users-reducer\";\r\nimport {messageReducer} from \"./message-reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n    users: usersReducer,\r\n    messages: messageReducer,\r\n});\r\n\r\nexport const store = configureStore({\r\n    reducer: rootReducer,\r\n    middleware: getDefaultMiddleware => getDefaultMiddleware().prepend(thunkMiddleware)\r\n});\r\n\r\nexport type AppRootType = ReturnType<typeof rootReducer>","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./redux/store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Header_wrapper__3NNzo\",\"icon\":\"Header_icon__1xeEP\",\"user\":\"Header_user__23UCj\",\"text\":\"Header_text__394VI\",\"image\":\"Header_image__2Uarx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"UsersList_message__2VC16\",\"photo\":\"UsersList_photo__1nqM_\",\"cloud\":\"UsersList_cloud__1qdBq\",\"triangle\":\"UsersList_triangle__3fdgE\",\"messageBox\":\"UsersList_messageBox__1bcn4\",\"messageBody\":\"UsersList_messageBody__2FkMs\",\"newImage\":\"UsersList_newImage__3abgC\",\"name\":\"UsersList_name__1OLtz\",\"deleteBtn\":\"UsersList_deleteBtn__2fM7y\",\"wrapper\":\"UsersList_wrapper__1YTw5\",\"user\":\"UsersList_user__1MRMR\",\"image\":\"UsersList_image__2ZdCB\",\"text\":\"UsersList_text__1ymRK\",\"delButton\":\"UsersList_delButton__hpZe3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerMenu\":\"BurgerMenu_burgerMenu__3eIGJ\",\"burgerMenuButton\":\"BurgerMenu_burgerMenuButton__2vkWZ\",\"burgerMenuLines\":\"BurgerMenu_burgerMenuLines__Gmw5J\",\"burgerMenuNav\":\"BurgerMenu_burgerMenuNav__3xeTP\",\"burgerMenuActive\":\"BurgerMenu_burgerMenuActive__3Oohd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatWrapper\":\"Chat_chatWrapper__SB19N\",\"dialogsWrapper\":\"Chat_dialogsWrapper__j45HI\",\"dialogs\":\"Chat_dialogs__3Egep\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Greet_wrapper__3U6wF\",\"text\":\"Greet_text__3CyFM\",\"button\":\"Greet_button__3yiYv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__3j0UZ\",\"photo\":\"Message_photo__1ZRQx\",\"cloud\":\"Message_cloud__31EoP\",\"triangle\":\"Message_triangle__kIzAx\",\"messageBox\":\"Message_messageBox__2azMm\",\"messageBody\":\"Message_messageBody__1gmN0\",\"newImage\":\"Message_newImage__IXbyr\",\"name\":\"Message_name__X7t6T\",\"deleteBtn\":\"Message_deleteBtn__2gKE5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Messages_wrapper__xWh8P\"};"],"sourceRoot":""}