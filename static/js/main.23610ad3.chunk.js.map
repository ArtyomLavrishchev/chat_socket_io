{"version":3,"sources":["components/Chat/footer/Footer.module.scss","api/images-api.ts","redux/users-reducer.ts","components/Chat/header/Header.tsx","redux/message-reducer.ts","socket.ts","components/Chat/footer/Footer.tsx","components/Chat/users-list/UsersList.tsx","components/Chat/messages/message/Message.tsx","components/Chat/messages/Messages.tsx","components/menu/BurgerMenu.tsx","components/Chat/Chat.tsx","common/useWindowSize.ts","components/Greet/Greet.tsx","common/name-generator.ts","App.tsx","redux/store.ts","index.tsx","components/Chat/header/Header.module.scss","components/Chat/users-list/UsersList.module.scss","components/menu/BurgerMenu.module.scss","components/Chat/Chat.module.scss","components/Greet/Greet.module.scss","components/Chat/messages/message/Message.module.scss","components/Chat/messages/Messages.module.scss"],"names":["module","exports","imagesApi","axios","get","then","res","data","slice","createSlice","name","initialState","id","userName","photo","listOfUsers","reducers","setUser","state","action","payload","setPhoto","addUserToTheList","find","u","push","removeUser","index","findIndex","splice","usersReducer","reducer","actions","Header","login","dispatch","useDispatch","useEffect","className","style","wrapper","icon","user","text","image","backgroundImage","messages","addMessage","removeMessage","m","messageReducer","socket","io","socketIoMiddleware","store","next","on","msg","Footer","useState","message","setMessage","setImage","sendMessage","v1","newImage","emit","console","log","src","alt","onKeyPress","e","charCode","input","onChange","currentTarget","value","type","placeholder","file","element","files","reader","FileReader","onloadend","result","readAsDataURL","button","htmlFor","disabled","onClick","UsersList","users","useSelector","map","delButton","Message","deleteMessage","cloud","triangle","messageBox","messageBody","deleteBtn","React","memo","Messages","useCallback","messageId","messagesAnchorRef","useRef","autoScrollIsActive","setAutoScrollIsActive","current","scrollIntoView","behavior","onScroll","Math","abs","scrollHeight","scrollTop","clientHeight","ref","BurgerMenu","checked","setChecked","activeMenuClass","burgerMenuActive","burgerMenu","burgerMenuButton","burgerMenuLines","burgerMenuNav","Chat","width","undefined","setWidth","handleResize","window","innerWidth","addEventListener","removeEventListener","useWindowSize","chatWrapper","dialogsWrapper","dialogs","Greet","joinHandler","styles","names","surnames","App","join","setJoin","indexHandler","arr","floor","random","length","firstLetterToUpperCase","arg","toUpperCase","surname","nameGenerator","a","img","error","rootReducer","combineReducers","configureStore","middleware","getDefaultMiddleware","prepend","thunkMiddleware","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.23610ad3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Footer_wrapper__zIEXu\",\"newImage\":\"Footer_newImage__39kcA\",\"input\":\"Footer_input__mPkka\",\"file\":\"Footer_file__8AYBu\",\"button\":\"Footer_button__enWyV\"};","import axios from 'axios';\r\n\r\nexport const imagesApi = {\r\n    getImage() {\r\n        return axios.get(`https://breakingbadapi.com/api/character/random`).then(res => res.data)\r\n    }\r\n}","import {createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\nimport {Dispatch} from \"redux\";\r\nimport {imagesApi} from \"../api/images-api\";\r\n\r\nconst initialState: InitialState = {\r\n    id: '',\r\n    userName: '',\r\n    photo: '',\r\n    listOfUsers: []\r\n};\r\n\r\nconst slice = createSlice({\r\n    name: 'users',\r\n    initialState: initialState,\r\n    reducers: {\r\n        setUser(state, action: PayloadAction<string>) {\r\n            state.userName = action.payload;\r\n        },\r\n        setPhoto(state, action: PayloadAction<string>) {\r\n            state.photo = action.payload;\r\n        },\r\n        addUserToTheList(state, action: PayloadAction<UsersType>) {\r\n            if (!state.listOfUsers.find(u => u.name === action.payload.name)) {\r\n                state.listOfUsers.push({...action.payload});\r\n            }\r\n        },\r\n        removeUser(state, action: PayloadAction<string>) {\r\n            const index = state.listOfUsers.findIndex(u => u.name === action.payload);\r\n            if (index > -1) {\r\n                state.listOfUsers.splice(index, 1)\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nexport const usersReducer = slice.reducer;\r\nexport const {setUser, setPhoto, addUserToTheList, removeUser} = slice.actions;\r\n\r\nexport const getPhoto = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const data = await imagesApi.getImage()\r\n        dispatch(setPhoto(data[0].img))\r\n    } catch (err) {\r\n        console.error(err)\r\n    }\r\n}\r\n\r\ntype InitialState = {\r\n    id: string\r\n    userName: string\r\n    photo: string\r\n    listOfUsers: Array<UsersType>\r\n}\r\n\r\nexport type UsersType = {\r\n    name: string\r\n    photo: string\r\n}","import React, {useEffect} from 'react';\r\nimport {addUserToTheList} from '../../../redux/users-reducer';\r\nimport style from './Header.module.scss'\r\nimport {useDispatch} from \"react-redux\";\r\n\r\nconst Header: React.FC<PropsType> = ({photo, login}) => {\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        dispatch(addUserToTheList({name: login, photo: photo}))\r\n    }, [])\r\n    return (\r\n        <header className={style.wrapper}>\r\n            <div>\r\n                <span className={style.icon}>&#x2709;</span>\r\n            </div>\r\n            <div className={style.user}>\r\n                <span className={style.text}>{login}</span>\r\n                <div className={style.image} style={{backgroundImage: `url(\"${photo}\")`}}/>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n\r\ntype PropsType = {\r\n    photo: string\r\n    login: string\r\n}","import {createSlice, PayloadAction} from \"@reduxjs/toolkit\";\r\n\r\nconst initialState: InitialStateType = {\r\n    messages: [],\r\n};\r\n\r\nconst slice = createSlice({\r\n    name: 'messages',\r\n    initialState: initialState,\r\n    reducers: {\r\n        addMessage(state, action: PayloadAction<MessageType>) {\r\n            state.messages.push({...action.payload})\r\n        },\r\n        removeMessage(state, action: PayloadAction<string>) {\r\n            const index = state.messages.findIndex(m => m.id === action.payload);\r\n            if (index > -1) {\r\n                state.messages.splice(index, 1)\r\n            }\r\n        }\r\n    }\r\n})\r\n\r\nexport const messageReducer = slice.reducer;\r\nexport const {addMessage, removeMessage} = slice.actions;\r\n\r\ntype InitialStateType = {\r\n    messages: Array<MessageType>\r\n}\r\n\r\nexport type MessageType = {\r\n    id: string\r\n    message: string\r\n    name: string\r\n    photo: string\r\n    newImage: string\r\n}","import io from 'socket.io-client';\r\nimport {AnyAction, Dispatch, MiddlewareAPI, Action} from \"redux\";\r\n\r\nimport {addUserToTheList} from \"./redux/users-reducer\";\r\nimport {addMessage, MessageType} from \"./redux/message-reducer\";\r\n\r\nconst socket = io(\"https://socketiochat-server.herokuapp.com/\");\r\n// const socket = io(\"http://localhost:8080/\");\r\n\r\nexport const socketIoMiddleware = (store: MiddlewareAPI) => (next: Dispatch<AnyAction>) => {\r\n    socket.on('chat message', (msg: MessageType) => {\r\n        store.dispatch(addMessage(msg));\r\n        store.dispatch(addUserToTheList({name: msg.name, photo: msg.photo}))\r\n        }\r\n    );\r\n\r\n    return (action: Action) => {\r\n        next(action);\r\n    }\r\n}\r\n\r\nexport default socket;","import React, {ChangeEvent, useState} from 'react';\r\nimport {v1} from \"uuid\";\r\n\r\nimport socket from \"../../../socket\";\r\n\r\nimport style from './Footer.module.scss';\r\n\r\nconst Footer: React.FC<PropsType> = ({userName, photo}) => {\r\n    const [message, setMessage] = useState<string>('');\r\n    const [image, setImage] = useState<string | ArrayBuffer | null>('');\r\n    const messageHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setMessage(e.currentTarget.value);\r\n\r\n    };\r\n\r\n    const sendMessage = () => {\r\n        const data = {\r\n            id: v1(),\r\n            name: userName,\r\n            message: message,\r\n            photo: photo,\r\n            newImage: image,\r\n        };\r\n        socket.emit('chat message', data);\r\n        console.log(data)\r\n        setMessage('');\r\n        setImage('')\r\n\r\n    };\r\n\r\n    function encodeImageFileAsURL(element: ChangeEvent<HTMLInputElement>) {\r\n        let file;\r\n        if (element.currentTarget.files) {\r\n            file = element.currentTarget.files[0];\r\n        }\r\n        let reader = new FileReader();\r\n        reader.onloadend = function () {\r\n            setImage(reader.result)\r\n        }\r\n        file && reader.readAsDataURL(file);\r\n    }\r\n\r\n    const onPressEnter = (e: React.KeyboardEvent) => {\r\n        if (e.charCode === 13) {\r\n            sendMessage()\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={style.wrapper}>\r\n            {image && <img className={style.newImage} src={`${image}`} alt={'newImage'}/>}\r\n            <input onKeyPress={onPressEnter} className={style.input} onChange={messageHandler} type={'text'}\r\n                   placeholder={\"Message\"}\r\n                   value={message}/>\r\n            <input type=\"file\" name=\"file\" id=\"input__file\" className={style.file} onChange={encodeImageFileAsURL}/>\r\n            <label className={style.button} htmlFor=\"input__file\">&#10011;</label>\r\n            <button disabled={message === '' && image === ''} className={style.button}\r\n                    onClick={sendMessage}>&#10147;</button>\r\n        </div>\r\n    );\r\n};\r\nexport default Footer;\r\n\r\ntype PropsType = {\r\n    userName: string\r\n    photo: string\r\n}","import React from 'react';\r\nimport {removeUser, UsersType} from \"../../../redux/users-reducer\";\r\nimport style from './UsersList.module.scss';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootType} from \"../../../redux/store\";\r\n\r\nconst UsersList: React.FC = () => {\r\n    const dispatch = useDispatch();\r\n    const users = useSelector<AppRootType, Array<UsersType>>(state => state.users.listOfUsers)\r\n    const removeUserHandler = (userName: string) => {\r\n        dispatch(removeUser(userName));\r\n    }\r\n    return (\r\n        <div className={style.wrapper}>\r\n            {users.map(u => <div className={style.user} key={u.name}>\r\n                <div className={style.image} style={{backgroundImage: `url(\"${u.photo}\")`}}/>\r\n                <div className={style.text}>{u.name}</div>\r\n                <button className={style.delButton} onClick={() => removeUserHandler(u.name)}>&#10008;</button>\r\n            </div>)}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UsersList;","import React from \"react\";\nimport style from \"./Message.module.scss\"\n\n\ntype MessageType = {\n    photo: string\n    name: string\n    message: string\n    id: string\n    newImage: string\n    deleteMessage: (id: string) => void\n}\n\nconst Message: React.FC<MessageType> = (\n    {photo, name, message, id, deleteMessage, newImage}) => {\n    return (\n        <div className={style.message}>\n            <div className={style.photo} style={{backgroundImage: `url(\"${photo}\")`}}/>\n            <div className={style.cloud}>\n                <div className={style.triangle}/>\n                <div className={style.messageBox}>\n                    <div className={style.name}>{name}</div>\n                    <div className={style.messageBody}>\n                        {newImage && <img className={style.newImage} src={`${newImage}`} alt={'newImage'}/>}\n                        {message}\n                    </div>\n                </div>\n            </div>\n            <button className={style.deleteBtn} onClick={() => deleteMessage(id)}>&#10008;</button>\n        </div>\n    );\n};\n\nexport default React.memo(Message);\n","import React, {useCallback, useEffect, useRef, useState} from 'react';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\n\r\nimport {MessageType, removeMessage} from \"../../../redux/message-reducer\";\r\nimport {AppRootType} from \"../../../redux/store\";\r\nimport Message from \"./message/Message\";\r\n\r\nimport style from \"./Messages.module.scss\";\r\n\r\nconst Messages: React.FC = () => {\r\n    const messages = useSelector<AppRootType, Array<MessageType>>(state => state.messages.messages)\r\n    const dispatch = useDispatch();\r\n    const deleteMessage = useCallback((messageId: string) => {\r\n        dispatch(removeMessage(messageId));\r\n    }, [dispatch]);\r\n    const messagesAnchorRef = useRef<HTMLDivElement>(null)\r\n    const [autoScrollIsActive, setAutoScrollIsActive] = useState<boolean>(true)\r\n\r\n    useEffect(() => {\r\n        if (autoScrollIsActive) {\r\n            messagesAnchorRef.current?.scrollIntoView({behavior: \"smooth\"})\r\n        }\r\n    }, [messages])\r\n\r\n    const scrollHandler = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        const element = e.currentTarget;\r\n        if (Math.abs((element.scrollHeight - element.scrollTop) - element.clientHeight) < 300) {\r\n            !autoScrollIsActive && setAutoScrollIsActive(true)\r\n        } else {\r\n            autoScrollIsActive && setAutoScrollIsActive(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={style.wrapper} onScroll={scrollHandler}>\r\n            {messages.map((m) => <div key={m.id}>\r\n                <Message\r\n                    newImage={m.newImage}\r\n                    photo={m.photo}\r\n                    name={m.name}\r\n                    message={m.message}\r\n                    id={m.id}\r\n                    deleteMessage={deleteMessage}/>\r\n            </div>)}\r\n            <div ref={messagesAnchorRef}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Messages;\r\n","import React, {useState} from \"react\";\r\nimport style from \"./BurgerMenu.module.scss\"\r\nimport UsersList from \"../Chat/users-list/UsersList\";\r\n\r\nexport const BurgerMenu = React.memo(() => {\r\n    const [checked, setChecked] = useState(false);\r\n\r\n    const activeMenuClass = `${checked ? style.burgerMenuActive : ''} ${style.burgerMenu}`\r\n\r\n    return (\r\n        <div className={activeMenuClass}>\r\n            <div onClick={() => setChecked(!checked)} className={style.burgerMenuButton}>\r\n                <span className={style.burgerMenuLines}/>\r\n            </div>\r\n            <div className={style.burgerMenuNav}>\r\n                <UsersList/>\r\n            </div>\r\n        </div>\r\n    )\r\n});\r\n","import React from 'react';\r\nimport {useSelector} from \"react-redux\";\r\n\r\nimport {AppRootType} from \"../../redux/store\";\r\nimport Header from \"./header/Header\";\r\nimport Footer from \"./footer/Footer\";\r\nimport UsersList from \"./users-list/UsersList\";\r\nimport Messages from \"./messages/Messages\";\r\nimport {useWindowSize} from \"../../common/useWindowSize\";\r\nimport {BurgerMenu} from '../menu/BurgerMenu';\r\n\r\nimport style from './Chat.module.scss'\r\n\r\nconst Chat = () => {\r\n    const userName = useSelector<AppRootType, string>(state => state.users.userName)\r\n    const photo = useSelector<AppRootType, string>(state => state.users.photo)\r\n    const width = useWindowSize();\r\n\r\n    return (\r\n        <div className={style.chatWrapper}>\r\n            <Header photo={photo} login={userName}/>\r\n            <div className={style.dialogsWrapper}>\r\n                {width && width <= 768 ? <BurgerMenu/> : <UsersList/>}\r\n                <div className={style.dialogs}>\r\n                    <Messages/>\r\n                    <Footer photo={photo} userName={userName}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;","import {useEffect, useState} from \"react\";\r\n\r\n\r\nexport function useWindowSize() {\r\n    const [width, setWidth] = useState<number | undefined>(undefined);\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWidth(window.innerWidth);\r\n        }\r\n        window.addEventListener(\"resize\", handleResize);\r\n        handleResize();\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    return width;\r\n}","import React from 'react';\r\nimport styles from './Greet.module.scss'\r\n\r\ntype GreetType = {\r\n    joinHandler: () => void\r\n}\r\n\r\nconst Greet: React.FC<GreetType> = ({joinHandler}) => {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className={styles.text}>Добро пожаловать в чат!</div>\r\n            <button className={styles.button} onClick={joinHandler}>Войти в комнату</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Greet;","const names = [\"прежний\", \"административный\", \"теплый\", \"женский\", \"яркий\", \"серый\", \"официальный\", \"английский\",\r\n    \"французский\", \"опасный\", \"богатый\", \"правовой\", \"железный\", \"верный\", \"дополнительный\", \"лесной\", \"горячий\",\r\n    \"редкий\", \"массовый\", \"региональный\", \"активный\", \"умный\", \"летний\", \"божий\", \"юридический\", \"здоровый\", \"веселый\",\r\n    \"налоговый\", \"эффективный\", \"художественный\", \"уголовный\", \"взрослый\", \"северный\", \"генеральный\", \"сегодняшний\",\r\n    \"древний\", \"замечательный\", \"милый\", \"острый\", \"лишний\", \"узкий\", \"задний\", \"бедный\", \"ясный\", \"синий\", \"указанный\",\r\n    \"согласный\", \"желтый\", \"творческий\", \"трудный\", \"нижний\", \"культурный\", \"мягкий\", \"литературный\",\r\n    \"сухой\", \"верхний\", \"мощный\", \"обязанный\", \"жесткий\", \"морской\", \"вечный\", \"спокойный\", \"ночной\", \"учебный\",\r\n    \"медицинский\", \"промышленный\", \"свежий\", \"крепкий\", \"полезный\", \"природный\", \"традиционный\", \"правильный\",\r\n    \"партийный\", \"психологический\", \"голубой\", \"православный\", \"дальний\", \"совместный\", \"деревянный\", \"материальный\",\r\n    \"виноватый\", \"понятный\", \"приятный\", \"исполнительный\", \"круглый\", \"семейный\", \"транспортный\", \"домашний\",\r\n    \"торговый\", \"резкий\", \"удивительный\", \"мужской\", \"некоторый\", \"практический\", \"строгий\", \"существенный\",\r\n    \"индивидуальный\", \"сельский\", \"невозможный\"]\r\nconst surnames = [\"год\", \"человек\", \"день\", \"вопрос\", \"глаз\", \"друг\", \"дом\", \"случай\", \"ребенок\", \"вид\", \"конец\",\r\n    \"город\", \"закон\", \"час\", \"образ\", \"отец\", \"результат\", \"бог\", \"народ\", \"голос\", \"процесс\", \"суд\", \"уровень\",\r\n    \"стол\", \"президент\", \"путь\", \"язык\", \"взгляд\", \"момент\", \"месяц\", \"порядок\", \"муж\", \"вечер\", \"орган\", \"рынок\",\r\n    \"смысл\", \"театр\", \"труд\", \"центр\", \"сын\", \"интерес\", \"век\", \"автор\", \"ответ\", \"совет\", \"разговор\", \"мужчина\",\r\n    \"ряд\", \"счет\", \"план\", \"проект\", \"материал\", \"рубль\", \"документ\", \"срок\", \"институт\", \"ход\", \"директор\", \"опыт\",\r\n    \"принцип\", \"товарищ\", \"объект\", \"гражданин\", \"период\", \"состав\", \"пример\", \"лес\", \"палец\", \"тип\", \"метод\", \"брат\",\r\n    \"представитель\", \"шаг\", \"край\", \"размер\", \"район\", \"банк\", \"начальник\", \"класс\", \"зал\", \"характер\", \"герой\",\r\n    \"гость\", \"воздух\", \"мальчик\", \"фильм\", \"договор\", \"регион\", \"выбор\", \"врач\", \"факт\", \"завод\", \"бизнес\", \"союз\",\r\n    \"специалист\", \"руководитель\", \"дух\", \"способ\", \"хозяин\", \"доллар\"]\r\n\r\nexport const nameGenerator = () => {\r\n    const indexHandler = (arr: string[]) => Math.floor(Math.random() * arr.length);\r\n    const firstLetterToUpperCase = (arg: string) => arg[0].toUpperCase() + arg.slice(1);\r\n    const name = names[indexHandler(names)];\r\n    const surname = surnames[indexHandler(surnames)];\r\n    return `${firstLetterToUpperCase(name)} ${firstLetterToUpperCase(surname)}`;\r\n}","import React, {useEffect, useState} from 'react';\nimport './App.scss';\nimport Chat from \"./components/Chat/Chat\";\nimport Greet from \"./components/Greet/Greet\";\nimport {getPhoto, setUser} from \"./redux/users-reducer\";\nimport {nameGenerator} from \"./common/name-generator\";\nimport {useDispatch} from \"react-redux\";\n\nconst App = () => {\n    const [join, setJoin] = useState<boolean>(false);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(setUser(nameGenerator()));\n        dispatch(getPhoto())\n    }, [dispatch]);\n\n    const joinHandler = () => {\n        setJoin(true)\n    };\n\n    return (\n        <div className=\"App\">\n            {!join? <Greet joinHandler={joinHandler}/> : <Chat/>}\n        </div>\n    );\n};\nexport default App;","import {combineReducers} from \"redux\";\r\nimport {configureStore} from \"@reduxjs/toolkit\";\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport {usersReducer} from \"./users-reducer\";\r\nimport {messageReducer} from \"./message-reducer\";\r\nimport {socketIoMiddleware} from \"../socket\";\r\n\r\nconst rootReducer = combineReducers({\r\n    users: usersReducer,\r\n    messages: messageReducer,\r\n});\r\n\r\nexport const store = configureStore({\r\n    reducer: rootReducer,\r\n    middleware: getDefaultMiddleware => getDefaultMiddleware().prepend(thunkMiddleware, socketIoMiddleware)\r\n});\r\n\r\nexport type AppRootType = ReturnType<typeof rootReducer>","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./redux/store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Header_wrapper__1jt9X\",\"icon\":\"Header_icon__3dj7j\",\"user\":\"Header_user__F-07a\",\"text\":\"Header_text__2XJGB\",\"image\":\"Header_image__14woE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"UsersList_message__35HJZ\",\"photo\":\"UsersList_photo__1_dG4\",\"cloud\":\"UsersList_cloud__2puNr\",\"triangle\":\"UsersList_triangle__2bPmj\",\"messageBox\":\"UsersList_messageBox__31ZWQ\",\"messageBody\":\"UsersList_messageBody__3J_QN\",\"newImage\":\"UsersList_newImage__mqt3e\",\"name\":\"UsersList_name__2qsU8\",\"deleteBtn\":\"UsersList_deleteBtn__3FaKr\",\"wrapper\":\"UsersList_wrapper__2eHba\",\"user\":\"UsersList_user__Ir7FT\",\"image\":\"UsersList_image__125Mu\",\"text\":\"UsersList_text__2AmZs\",\"delButton\":\"UsersList_delButton__5Sq76\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerMenu\":\"BurgerMenu_burgerMenu__1CI-6\",\"burgerMenuButton\":\"BurgerMenu_burgerMenuButton__2R28W\",\"burgerMenuLines\":\"BurgerMenu_burgerMenuLines__11VML\",\"burgerMenuNav\":\"BurgerMenu_burgerMenuNav__1nqR_\",\"burgerMenuActive\":\"BurgerMenu_burgerMenuActive__N2caI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatWrapper\":\"Chat_chatWrapper__3OsOh\",\"dialogsWrapper\":\"Chat_dialogsWrapper__PZEEZ\",\"dialogs\":\"Chat_dialogs__2T3bQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Greet_wrapper__2w_li\",\"text\":\"Greet_text__36Ks8\",\"button\":\"Greet_button__3NvbQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__2EGmo\",\"photo\":\"Message_photo__1Rzka\",\"cloud\":\"Message_cloud__36aIW\",\"triangle\":\"Message_triangle__2kran\",\"messageBox\":\"Message_messageBox__18AVq\",\"messageBody\":\"Message_messageBody__36g_W\",\"newImage\":\"Message_newImage__3_88Y\",\"name\":\"Message_name__3ho2A\",\"deleteBtn\":\"Message_deleteBtn__3R5al\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Messages_wrapper__3ruZv\"};"],"sourceRoot":""}